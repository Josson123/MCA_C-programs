#include <stdio.h>
#include <conio.h>

#define MAX 100

char stack[MAX];
int top = -1;

/* stack operations */
void push(char ch)
{
    if (top < MAX - 1)
        stack[++top] = ch;
}

char pop()
{
    if (top >= 0)
        return stack[top--];
    return '\0';
}

int match(char open, char close)
{
    if (open == '(' && close == ')') return 1;
    if (open == '{' && close == '}') return 1;
    if (open == '[' && close == ']') return 1;
    return 0;
}

void main()
{
    FILE *fp;
    char ch, temp;
    int error = 0;

    clrscr();

    fp = fopen("test.txt", "r");
    if (fp == NULL)
    {
        printf("Cannot open file!");
        getch();
        return;
    }

    while ((ch = fgetc(fp)) != EOF)
    {
        /* opening brackets */
        if (ch == '(' || ch == '{' || ch == '[')
        {
            push(ch);
        }
        /* closing brackets */
        else if (ch == ')' || ch == '}' || ch == ']')
        {
            if (top == -1)
            {
                error = 1;
                break;
            }
            temp = pop();
            if (!match(temp, ch))
            {
                error = 1;
                break;
            }
        }
    }

    fclose(fp);

    if (error == 1 || top != -1)
        printf("Brackets are MISMATCHED");
    else
        printf("Brackets are MATCHED");

    getch();
}
